{"ast":null,"code":"import _slicedToArray from\"/Users/olegagolnikov/react-stellar-burger-ste2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import style from\"./BurgerConstructor.module.css\";import{DragIcon,CurrencyIcon,ConstructorElement,Button}from\"@ya.praktikum/react-developer-burger-ui-components\";import{ingredientPropType}from\"../../utils/prop-types\";import{useState,useMemo}from\"react\";import Modal from\"../Modal/Modal\";import OrderDetails from\"../OrderDetails/OrderDetails \";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function BurgerConstructor(_ref){var data=_ref.data;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var handleOpenModal=function handleOpenModal(){setIsOpen(true);};var handleCloseModal=function handleCloseModal(){setIsOpen(false);};var bun=data.find(function(item){return item.type===\"bun\";});var myIngredient=data.filter(function(item){return item.type!==\"bun\";});var price=useMemo(function(){return data.reduce(function(total,item){return total+item.price;},0);},[data]);return/*#__PURE__*/_jsxs(\"section\",{className:\" \".concat(style.burgerConstructor,\" pt-5 pl-4 pr-4\"),children:[data.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\" \".concat(style.buns,\" pb-5 pr-6\"),children:/*#__PURE__*/_jsx(ConstructorElement,{type:\"top\",isLocked:true,text:\"\".concat(bun.name,\" (\\u0432\\u0435\\u0440\\u0445)\"),price:bun.price,thumbnail:bun.image})}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-scroll  \".concat(style.scroll),children:/*#__PURE__*/_jsx(\"ul\",{className:style.list,children:myIngredient.map(function(item){return item.type!==\"bun\"&&/*#__PURE__*/_jsxs(\"li\",{className:style.li,children:[/*#__PURE__*/_jsx(DragIcon,{type:\"primary\"}),/*#__PURE__*/_jsx(ConstructorElement,{sLocked:false,text:item.name,price:item.price,thumbnail:item.image})]},item._id);})})}),/*#__PURE__*/_jsx(\"div\",{className:\" \".concat(style.buns,\" pb-5 pr-7 pt-5\"),children:/*#__PURE__*/_jsx(ConstructorElement,{type:\"bottom\",isLocked:true,text:\"\".concat(bun.name,\" (\\u043D\\u0438\\u0437)\"),price:bun.price,thumbnail:bun.image})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-10 pr-8 \".concat(style.order),children:[/*#__PURE__*/_jsxs(\"div\",{className:style.price,children:[/*#__PURE__*/_jsx(\"p\",{className:\"text text_type_digits-medium \",children:price}),/*#__PURE__*/_jsx(CurrencyIcon,{type:\"primary\"})]}),/*#__PURE__*/_jsx(Button,{htmlType:\"button\",type:\"primary\",size:\"large\",onClick:handleOpenModal,children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),isOpen&&/*#__PURE__*/_jsx(Modal,{closePopup:handleCloseModal,children:/*#__PURE__*/_jsx(OrderDetails,{})})]})]});}export default BurgerConstructor;","map":{"version":3,"names":["style","DragIcon","CurrencyIcon","ConstructorElement","Button","ingredientPropType","useState","useMemo","Modal","OrderDetails","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BurgerConstructor","_ref","data","_useState","_useState2","_slicedToArray","isOpen","setIsOpen","handleOpenModal","handleCloseModal","bun","find","item","type","myIngredient","filter","price","reduce","total","className","concat","burgerConstructor","children","length","buns","isLocked","text","name","thumbnail","image","scroll","list","map","li","sLocked","_id","order","htmlType","size","onClick","closePopup"],"sources":["/Users/olegagolnikov/react-stellar-burger-ste2/src/components/BurgerConstructor/BurgerConstructor.jsx"],"sourcesContent":["import style from \"./BurgerConstructor.module.css\";\nimport {\n  DragIcon,\n  CurrencyIcon,\n  ConstructorElement,\n  Button,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport PropTypes from \"prop-types\";\nimport { ingredientPropType } from \"../../utils/prop-types\";\nimport { useState, useMemo } from \"react\";\nimport Modal from \"../Modal/Modal\";\nimport OrderDetails from \"../OrderDetails/OrderDetails \";\n\nfunction BurgerConstructor({ data }) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleOpenModal = () => {\n    setIsOpen(true);\n  };\n\n  const handleCloseModal = () => {\n    setIsOpen(false);\n  };\n\n  const bun = data.find((item) => item.type === \"bun\");\n  const myIngredient = data.filter((item) => item.type !== \"bun\");\n\n  const price = useMemo(() => {\n    return data.reduce((total, item) => total + item.price, 0);\n  }, [data]);\n\n  return (\n    <section className={` ${style.burgerConstructor} pt-5 pl-4 pr-4`}>\n      {data.length > 0 && (\n        <>\n          <div className={` ${style.buns} pb-5 pr-6`}>\n            <ConstructorElement\n              type=\"top\"\n              isLocked={true}\n              text={`${bun.name} (верх)`}\n              price={bun.price}\n              thumbnail={bun.image}\n            />\n          </div>\n          <div className={`custom-scroll  ${style.scroll}`}>\n            <ul className={style.list}>\n              {myIngredient.map(\n                (item) =>\n                  item.type !== \"bun\" && (\n                    <li className={style.li} key={item._id}>\n                      <DragIcon type=\"primary\" />\n                      <ConstructorElement\n                        sLocked={false}\n                        text={item.name}\n                        price={item.price}\n                        thumbnail={item.image}\n                      />\n                    </li>\n                  )\n              )}\n            </ul>\n          </div>\n          <div className={` ${style.buns} pb-5 pr-7 pt-5`}>\n            <ConstructorElement\n              type=\"bottom\"\n              isLocked={true}\n              text={`${bun.name} (низ)`}\n              price={bun.price}\n              thumbnail={bun.image}\n            />\n          </div>\n        </>\n      )}\n\n      <div className={`pt-10 pr-8 ${style.order}`}>\n        <div className={style.price}>\n          <p className=\"text text_type_digits-medium \">{price}</p>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <Button\n          htmlType=\"button\"\n          type=\"primary\"\n          size=\"large\"\n          onClick={handleOpenModal}\n        >\n          Оформить заказ\n        </Button>\n        {isOpen && (\n          <Modal closePopup={handleCloseModal}>\n            <OrderDetails />\n          </Modal>\n        )}\n      </div>\n    </section>\n  );\n}\n\nBurgerConstructor.propTypes = {\n  data: PropTypes.arrayOf(ingredientPropType.isRequired).isRequired,\n};\n\nexport default BurgerConstructor;\n"],"mappings":"oIAAA,MAAO,CAAAA,KAAK,KAAM,gCAAgC,CAClD,OACEC,QAAQ,CACRC,YAAY,CACZC,kBAAkB,CAClBC,MAAM,KACD,oDAAoD,CAE3D,OAASC,kBAAkB,KAAQ,wBAAwB,CAC3D,OAASC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CACzC,MAAO,CAAAC,KAAK,KAAM,gBAAgB,CAClC,MAAO,CAAAC,YAAY,KAAM,+BAA+B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEzD,QAAS,CAAAC,iBAAiBA,CAAAC,IAAA,CAAW,IAAR,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAC/B,IAAAC,SAAA,CAA4Bb,QAAQ,CAAC,KAAK,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAApCG,MAAM,CAAAF,UAAA,IAAEG,SAAS,CAAAH,UAAA,IAExB,GAAM,CAAAI,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAA,CAAS,CAC5BD,SAAS,CAAC,IAAI,CAAC,CACjB,CAAC,CAED,GAAM,CAAAE,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAA,CAAS,CAC7BF,SAAS,CAAC,KAAK,CAAC,CAClB,CAAC,CAED,GAAM,CAAAG,GAAG,CAAGR,IAAI,CAACS,IAAI,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,IAAI,GAAK,KAAK,GAAC,CACpD,GAAM,CAAAC,YAAY,CAAGZ,IAAI,CAACa,MAAM,CAAC,SAACH,IAAI,QAAK,CAAAA,IAAI,CAACC,IAAI,GAAK,KAAK,GAAC,CAE/D,GAAM,CAAAG,KAAK,CAAGzB,OAAO,CAAC,UAAM,CAC1B,MAAO,CAAAW,IAAI,CAACe,MAAM,CAAC,SAACC,KAAK,CAAEN,IAAI,QAAK,CAAAM,KAAK,CAAGN,IAAI,CAACI,KAAK,GAAE,CAAC,CAAC,CAC5D,CAAC,CAAE,CAACd,IAAI,CAAC,CAAC,CAEV,mBACEL,KAAA,YAASsB,SAAS,KAAAC,MAAA,CAAMpC,KAAK,CAACqC,iBAAiB,mBAAkB,CAAAC,QAAA,EAC9DpB,IAAI,CAACqB,MAAM,CAAG,CAAC,eACd1B,KAAA,CAAAE,SAAA,EAAAuB,QAAA,eACE3B,IAAA,QAAKwB,SAAS,KAAAC,MAAA,CAAMpC,KAAK,CAACwC,IAAI,cAAa,CAAAF,QAAA,cACzC3B,IAAA,CAACR,kBAAkB,EACjB0B,IAAI,CAAC,KAAK,CACVY,QAAQ,CAAE,IAAK,CACfC,IAAI,IAAAN,MAAA,CAAKV,GAAG,CAACiB,IAAI,+BAAU,CAC3BX,KAAK,CAAEN,GAAG,CAACM,KAAM,CACjBY,SAAS,CAAElB,GAAG,CAACmB,KAAM,EACrB,EACE,cACNlC,IAAA,QAAKwB,SAAS,mBAAAC,MAAA,CAAoBpC,KAAK,CAAC8C,MAAM,CAAG,CAAAR,QAAA,cAC/C3B,IAAA,OAAIwB,SAAS,CAAEnC,KAAK,CAAC+C,IAAK,CAAAT,QAAA,CACvBR,YAAY,CAACkB,GAAG,CACf,SAACpB,IAAI,QACH,CAAAA,IAAI,CAACC,IAAI,GAAK,KAAK,eACjBhB,KAAA,OAAIsB,SAAS,CAAEnC,KAAK,CAACiD,EAAG,CAAAX,QAAA,eACtB3B,IAAA,CAACV,QAAQ,EAAC4B,IAAI,CAAC,SAAS,EAAG,cAC3BlB,IAAA,CAACR,kBAAkB,EACjB+C,OAAO,CAAE,KAAM,CACfR,IAAI,CAAEd,IAAI,CAACe,IAAK,CAChBX,KAAK,CAAEJ,IAAI,CAACI,KAAM,CAClBY,SAAS,CAAEhB,IAAI,CAACiB,KAAM,EACtB,GAP0BjB,IAAI,CAACuB,GAAG,CASvC,GACJ,EACE,EACD,cACNxC,IAAA,QAAKwB,SAAS,KAAAC,MAAA,CAAMpC,KAAK,CAACwC,IAAI,mBAAkB,CAAAF,QAAA,cAC9C3B,IAAA,CAACR,kBAAkB,EACjB0B,IAAI,CAAC,QAAQ,CACbY,QAAQ,CAAE,IAAK,CACfC,IAAI,IAAAN,MAAA,CAAKV,GAAG,CAACiB,IAAI,yBAAS,CAC1BX,KAAK,CAAEN,GAAG,CAACM,KAAM,CACjBY,SAAS,CAAElB,GAAG,CAACmB,KAAM,EACrB,EACE,GAET,cAEDhC,KAAA,QAAKsB,SAAS,eAAAC,MAAA,CAAgBpC,KAAK,CAACoD,KAAK,CAAG,CAAAd,QAAA,eAC1CzB,KAAA,QAAKsB,SAAS,CAAEnC,KAAK,CAACgC,KAAM,CAAAM,QAAA,eAC1B3B,IAAA,MAAGwB,SAAS,CAAC,+BAA+B,CAAAG,QAAA,CAAEN,KAAK,EAAK,cACxDrB,IAAA,CAACT,YAAY,EAAC2B,IAAI,CAAC,SAAS,EAAG,GAC3B,cACNlB,IAAA,CAACP,MAAM,EACLiD,QAAQ,CAAC,QAAQ,CACjBxB,IAAI,CAAC,SAAS,CACdyB,IAAI,CAAC,OAAO,CACZC,OAAO,CAAE/B,eAAgB,CAAAc,QAAA,CAC1B,iFAED,EAAS,CACRhB,MAAM,eACLX,IAAA,CAACH,KAAK,EAACgD,UAAU,CAAE/B,gBAAiB,CAAAa,QAAA,cAClC3B,IAAA,CAACF,YAAY,IAAG,EAEnB,GACG,GACE,CAEd,CAMA,cAAe,CAAAO,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}